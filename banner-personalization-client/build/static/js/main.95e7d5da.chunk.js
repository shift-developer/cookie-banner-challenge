(this["webpackJsonpbanner-personalization"]=this["webpackJsonpbanner-personalization"]||[]).push([[0],{171:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(19),c=n.n(i),o=n(9),s=(0,n(0).createContext)(),l=n(22),d="[auth] login",u="[auth] logout",j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(l.a)(Object(l.a)({},t.payload),{},{logged:!0});case u:return{logged:!1};default:return e}},b=n(31),h=n(14),m=n(16),x=n.n(m),f=n(21),p=n(252),O=n(104),g=n.n(O),v=n(2),y=function(){return Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(v.jsx)(g.a,{style:{color:"#7c3aed",fontSize:55}}),Object(v.jsx)(p.a,{variant:"h2",component:"h1",style:{fontWeight:"900",color:"#7c3aed",marginTop:4},children:"CMP"})]}),Object(v.jsx)(p.a,{variant:"h6",component:"h2",style:{color:"#6b7280",fontSize:14},children:"Wibson Cookie Management Platform Challenge"})]})},w=n(248),C=n(253),k=n(254),S=n(243),z=n(244),I=n(249),B=n(257),T=n(39),E=n.n(T),W=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r,a,i,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.prev=1,a=btoa("".concat(n,":").concat(r)),i={method:"POST",headers:{Authorization:"Basic "+a}},e.next=6,E()("/api/auth/login",i);case 6:return c=e.sent,e.abrupt("return",c.data);case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0.response.data){e.next=14;break}throw new Error(e.t0.response.data.message);case 14:return e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r,a,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,e.prev=1,r=n||localStorage.getItem("token"),a={method:"GET",headers:{Authorization:"Bearer "+r}},e.next=6,E()("/api/auth",a);case 6:return i=e.sent,e.abrupt("return",i.data);case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0.response.data){e.next=14;break}throw new Error(e.t0.response.data.message);case 14:return e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r,a,i,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,a=t.fullName,e.prev=1,i={method:"POST",data:{email:n,password:r,fullName:a}},e.next=5,E()("/api/auth/register",i);case 5:return c=e.sent,e.abrupt("return",c.data);case 9:if(e.prev=9,e.t0=e.catch(1),!e.t0.response.data){e.next=13;break}throw new Error(e.t0.response.data.message);case 13:return e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(x.a.mark((function e(){var t,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),n={method:"GET",headers:{Authorization:"Bearer "+t}},e.next=5,E()("/api/domains",n);case 5:return r=e.sent,e.abrupt("return",r.data.data);case 9:if(e.prev=9,e.t0=e.catch(0),!e.t0.response.data){e.next=13;break}throw new Error(e.t0.response.data.message);case 13:return e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r,a,i,c,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.domain,r=t.bckColor,a=t.primaryColor,i=t.fontColor,e.prev=1,c=localStorage.getItem("token"),o={method:"POST",headers:{Authorization:"Bearer "+c},data:{domain:n,bckColor:r,primaryColor:a,fontColor:i}},e.next=6,E()("/api/domains",o);case 6:return s=e.sent,e.abrupt("return",s.data);case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0.response.data){e.next=14;break}throw new Error(e.t0.response.data.message);case 14:return e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()("/api/domains/"+t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response.data){e.next=11;break}throw new Error(e.t0.response.data.message);case 11:return e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r,a,i,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.domainId,r=t.domainData,e.prev=1,a=localStorage.getItem("token"),i={method:"PUT",headers:{Authorization:"Bearer "+a},data:{domain:r.domain,bckColor:r.bckColor,primaryColor:r.primaryColor,fontColor:r.fontColor}},e.next=6,E()("/api/domains/"+n,i);case 6:return c=e.sent,e.abrupt("return",c.data);case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0.response.data){e.next=14;break}throw new Error(e.t0.response.data.message);case 14:return e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r,a,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.domainId,e.prev=1,r=localStorage.getItem("token"),a={method:"DELETE",headers:{Authorization:"Bearer "+r}},e.next=6,E()("/api/domains/"+n,a);case 6:return i=e.sent,e.abrupt("return",i.data);case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0.response.data){e.next=14;break}throw new Error(e.t0.response.data.message);case 14:return e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),q=n(5),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(o.a)(t,2),a=n[0],i=n[1],c=function(){i(e)},s=function(e){var t=e.target;i(Object(l.a)(Object(l.a)({},a),{},Object(q.a)({},t.name,t.value)))};return[a,s,c]},Z=function(){var e=Object(h.g)(),t=Object(r.useContext)(s).dispatch,n=G({email:"",password:""}),a=Object(o.a)(n,2),i=a[0],c=a[1],u=Object(r.useState)({loading:!1,error:null}),j=Object(o.a)(u,2),b=j[0],m=b.loading,O=b.error,g=j[1],T=i.email,E=i.password,D=function(){var e=Object(f.a)(x.a.mark((function e(){var n,r,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g({loading:!0,error:null}),e.next=4,W({email:T,password:E});case 4:return n=e.sent,r=n.token,localStorage.setItem("token",r),e.next=9,P({token:r});case 9:a=e.sent,localStorage.setItem("user",JSON.stringify(Object(l.a)(Object(l.a)({},a),{},{logged:!0}))),t({type:d,payload:a}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),g({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(w.a,{container:!0,component:"main",style:{height:"100vh",alignItems:"center"},children:Object(v.jsxs)(C.a,{component:k.a,maxWidth:"xs",style:{paddingBottom:30,padding:15,maxHeight:"60vh",marginBottom:40},children:[Object(v.jsx)(y,{}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:20},children:[Object(v.jsxs)("form",{style:{marginTop:20,marginBottom:20},onSubmit:function(){return D()},children:[Object(v.jsx)(S.a,{label:"Email",variant:"outlined",fullWidth:!0,name:"email",required:!0,value:T,onChange:c,helperText:null,error:!1,style:{marginBottom:10}}),Object(v.jsx)(S.a,{label:"Password",variant:"outlined",type:"password",fullWidth:!0,required:!0,value:E,onChange:c,name:"password",helperText:null,error:!1,style:{marginBottom:10}})]}),O&&Object(v.jsx)(z.a,{severity:"error",style:{marginBottom:10},children:O}),Object(v.jsx)(I.a,{variant:"contained",style:{background:"#7c3aed"},onClick:function(){return D()},children:m?Object(v.jsx)(B.a,{size:14,style:{color:"#fff"}}):Object(v.jsx)(p.a,{style:{fontSize:14},children:"Sign in"})}),Object(v.jsx)(I.a,{variant:"text",style:{color:"#7c3aed",marginTop:4,fontWeight:"normal",fontSize:13},onClick:function(){return e("/register")},children:"Sign Up"})]})]})})},J=function(){var e=Object(h.g)(),t=Object(r.useContext)(s).dispatch,n=G({email:"",password:"",fullName:""}),a=Object(o.a)(n,2),i=a[0],c=a[1],u=i.email,j=i.password,b=i.fullName,m=Object(r.useState)({loading:!1,error:null}),O=Object(o.a)(m,2),g=O[0],T=g.loading,E=g.error,W=O[1],A=function(){var e=Object(f.a)(x.a.mark((function e(){var n,r,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,W({loading:!0,error:null}),!1!==/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(u)){e.next=5;break}throw new Error("Enter valid email");case 5:if(!(j.length<6)){e.next=7;break}throw new Error("Password must be at least 6 characters");case 7:if(!(b.length<3)){e.next=9;break}throw new Error("Enter your name");case 9:return e.next=11,D({email:u,password:j,fullName:b});case 11:return n=e.sent,r=n.token,localStorage.setItem("token",r),e.next=16,P({token:r});case 16:a=e.sent,localStorage.setItem("user",JSON.stringify(Object(l.a)(Object(l.a)({},a),{},{logged:!0}))),t({type:d,payload:a}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),W({loading:!1,error:e.t0.message});case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(w.a,{container:!0,component:"main",style:{height:"100vh",alignItems:"center"},children:Object(v.jsxs)(C.a,{component:k.a,maxWidth:"xs",style:{paddingBottom:30,padding:15,maxHeight:"60vh",marginBottom:40},children:[Object(v.jsx)(y,{}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:20},children:[Object(v.jsxs)("form",{style:{marginTop:20,marginBottom:10},children:[Object(v.jsx)(S.a,{label:"Email",variant:"outlined",fullWidth:!0,required:!0,name:"email",value:u,onChange:c,helperText:null,error:!1,style:{marginBottom:10}}),Object(v.jsx)(S.a,{label:"Password",variant:"outlined",type:"password",fullWidth:!0,required:!0,name:"password",value:j,onChange:c,helperText:null,error:!1,style:{marginBottom:10}}),Object(v.jsx)(S.a,{label:"Name",variant:"outlined",fullWidth:!0,required:!0,name:"fullName",value:b,onChange:c,helperText:null,error:!1,style:{marginBottom:10}})]}),E&&Object(v.jsx)(z.a,{severity:"error",style:{marginBottom:10},children:E}),Object(v.jsx)(I.a,{variant:"contained",style:{background:"#7c3aed"},onClick:function(){return A()},children:T?Object(v.jsx)(B.a,{size:14,style:{color:"#fff"}}):Object(v.jsx)(p.a,{style:{fontSize:14},children:"Sign up"})}),Object(v.jsx)(I.a,{variant:"text",style:{color:"#7c3aed",marginTop:4,fontWeight:"normal",fontSize:13},onClick:function(){return e("/login")},children:"Sign In"})]})]})})},M=n(258),_=n(259),H=n(242),U=n(256),$=n(108),Y=n.n($),K=n(107),Q=n.n(K),V=function(){var e=Object(r.useContext)(s),t=e.user,n=e.dispatch,a=Object(h.g)();return Object(v.jsx)(k.a,{sx:{flexGrow:1},children:Object(v.jsx)(M.a,{position:"static",style:{background:"#7c3aed"},children:Object(v.jsxs)(_.a,{variant:"dense",children:[Object(v.jsx)(p.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"CMP"}),Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginRight:15,alignItems:"center"},children:[Object(v.jsx)(Q.a,{}),Object(v.jsx)(p.a,{style:{marginLeft:5},children:t.fullName||""})]}),Object(v.jsx)(H.a,{title:"Log Out",children:Object(v.jsx)(U.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return n({type:u}),localStorage.removeItem("user"),void a("/login",{replace:!0})},children:Object(v.jsx)(Y.a,{})})})]})]})})})},X=n(18),ee=n(247),te=n(260),ne=n(261),re=n(250),ae=n(262),ie=n(109),ce=n.n(ie),oe=n(110),se=n.n(oe),le=function(e){var t=e.domainDetails,n=e.deleteDomainInState,r=Object(h.g)(),a=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R({domainId:t});case 3:e.sent,n(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(te.a,{sx:{minWidth:275,marginBottom:2},variant:"outlined",children:[Object(v.jsxs)(ne.a,{children:[Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:20},children:[Object(v.jsx)(re.a,{label:"active",style:{background:"#10b981",color:"#fff",fontSize:12}}),Object(v.jsx)(p.a,{sx:{fontSize:14,marginLeft:2},color:"text.secondary",gutterBottom:!0,children:"Free Plan"})]}),Object(v.jsx)(p.a,{variant:"h5",component:"div",style:{marginLeft:5},children:t.domain})]}),Object(v.jsxs)(ae.a,{children:[Object(v.jsx)(H.a,{title:"Edit",children:Object(v.jsx)(U.a,{onClick:function(){return e=t._id,r("/domain/"+e);var e},children:Object(v.jsx)(ce.a,{})})}),Object(v.jsx)(H.a,{title:"Delete",children:Object(v.jsx)(U.a,{onClick:function(){a(t._id)},children:Object(v.jsx)(se.a,{})})})]})]})},de=n(111),ue=n.n(de),je=function(){var e=Object(h.g)();return Object(v.jsxs)(te.a,{sx:{minWidth:275,marginBottom:2},variant:"outlined",children:[Object(v.jsx)(ne.a,{children:Object(v.jsx)(p.a,{variant:"h5",component:"h5",style:{fontSize:20},children:"Free plan, add your domain, customize your banner and enjoy"})}),Object(v.jsx)(ae.a,{children:Object(v.jsxs)(I.a,{variant:"contained",style:{background:"#7c3aed",marginLeft:10,marginBottom:10},onClick:function(){return e("/new")},children:[Object(v.jsx)(ue.a,{style:{fontSize:14,marginRight:5}}),Object(v.jsx)(p.a,{style:{fontSize:14},children:"Domain"})]})})]})},be=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(!0),c=Object(o.a)(i,2),s=c[0],l=c[1];Object(r.useEffect)((function(){A().then((function(e){a(e),l(!1)})).catch((function(e){l(!1)}))}),[]);var d=function(e){var t=Object(X.a)(n),r=n.findIndex((function(t){return t._id===e}));t.splice(r,1),a(t)};return Object(v.jsxs)("div",{style:{margin:20},children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(p.a,{variant:"h5",component:"h2",children:"Your domains"}),Object(v.jsx)(p.a,{style:{fontSize:16,color:"#6b7280"},children:"Manage your cookie banners"})]}),s&&Object(v.jsx)(ee.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:s,children:Object(v.jsx)(B.a,{color:"inherit"})}),Object(v.jsxs)("div",{style:{marginTop:20},children:[Object(v.jsx)(je,{}),n.map((function(e){return Object(v.jsx)(le,{domainDetails:e,deleteDomainInState:d},e._id)}))]})]})},he=n(73),me=n.n(he),xe=n(24),fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(o.a)(t,2),a=n[0],i=n[1],c=function(){i(e)},s=Object(r.useCallback)((function(e,t){i(Object(l.a)(Object(l.a)({},a),{},Object(q.a)({},t,e)))}),[a]);return[a,s,c,i]},pe="fff",Oe="7c3aed",ge="000",ve=function(){var e=Object(h.g)(),t=G({domain:""}),n=Object(o.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)({loading:!1,error:null}),s=Object(o.a)(c,2),l=s[0],d=l.loading,u=l.error,j=s[1],b=fe({bckColor:Object(xe.b)("#"+pe),primaryColor:Object(xe.b)("#"+Oe),fontColor:Object(xe.b)("#"+ge)}),m=Object(o.a)(b,2),O=m[0],g=m[1],y=O.bckColor,w=O.primaryColor,C=O.fontColor,k=a.domain,T=function(){var t=Object(f.a)(x.a.mark((function t(){var n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,j({loading:!0,error:null}),!1!==/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/.test(k)){t.next=4;break}throw new Error("Enter valid domain name");case 4:return t.next=6,N({domain:k,bckColor:"#".concat(y.hex||pe),primaryColor:"#".concat(w.hex||Oe),fontColor:"#".concat(C.hex||ge)});case 6:return n=t.sent,r=n.domainId,t.abrupt("return",e("/domain/"+r));case 11:t.prev=11,t.t0=t.catch(0),j({error:t.t0.message,loading:!1});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{style:{margin:20},children:[Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(v.jsx)(H.a,{title:"Go back",children:Object(v.jsx)(U.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return e("/")},children:Object(v.jsx)(me.a,{})})}),Object(v.jsx)(p.a,{variant:"h6",component:"h4",style:{marginLeft:20},children:"Add new domain"})]}),Object(v.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center"},children:Object(v.jsxs)("div",{style:{marginTop:20,marginBottom:20,maxWidth:500},children:[Object(v.jsx)(S.a,{label:"Domain",variant:"outlined",fullWidth:!0,required:!0,name:"domain",value:k,onChange:i,helperText:null,error:!1,style:{marginBottom:20}}),Object(v.jsxs)("div",{children:[Object(v.jsx)(p.a,{style:{fontSize:19,color:"#6b7280",marginBottom:10},children:"Banner customization"}),Object(v.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(v.jsxs)("div",{style:{marginBottom:15},children:[Object(v.jsx)(p.a,{style:{fontSize:15},children:"Background color:"}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:10},children:[Object(v.jsx)(S.a,{variant:"outlined",size:"small",style:{maxWidth:100},disabled:!0,value:"#".concat(y.hex||pe)}),Object(v.jsx)(xe.a,{value:y,onChange:function(e){return g(e,"bckColor")},hideTextfield:!0})]})]}),Object(v.jsxs)("div",{style:{marginBottom:15},children:[Object(v.jsx)(p.a,{style:{fontSize:15},children:"Primary color:"}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:10},children:[Object(v.jsx)(S.a,{variant:"outlined",size:"small",style:{maxWidth:100},disabled:!0,value:"#".concat(w.hex||Oe)}),Object(v.jsx)(xe.a,{value:w,onChange:function(e){return g(e,"primaryColor")},hideTextfield:!0})]})]}),Object(v.jsxs)("div",{style:{marginBottom:15},children:[Object(v.jsx)(p.a,{style:{fontSize:15},children:"Font color:"}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:10},children:[Object(v.jsx)(S.a,{variant:"outlined",size:"small",style:{maxWidth:100},disabled:!0,value:"#".concat(C.hex||ge)}),Object(v.jsx)(xe.a,{value:C,onChange:function(e){return g(e,"fontColor")},hideTextfield:!0})]})]})]})]}),u&&Object(v.jsx)(z.a,{severity:"error",style:{marginTop:10},children:u}),Object(v.jsx)(I.a,{variant:"contained",fullWidth:!0,style:{background:"#7c3aed",maxWidth:500,marginTop:20},onClick:function(){T()},children:d?Object(v.jsx)(B.a,{size:14,style:{color:"#fff"}}):Object(v.jsx)(p.a,{style:{fontSize:14},children:"Add domain"})})]})}),Object(v.jsx)("div",{})]})},ye=n(251),we=n(246),Ce=function(e){var t=e.domainId,n=a.a.useState(!1),r=Object(o.a)(n,2),i=r[0],c=r[1],s='<script defer domain-id="'.concat(t,'" src="').concat(window.location.origin,'/widget/banner.js"><\/script>'),l=function(e,t){c(!1)};return Object(v.jsx)(te.a,{sx:{minWidth:275,marginBottom:2,maxWidth:900},variant:"outlined",children:Object(v.jsxs)(ne.a,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(v.jsx)(p.a,{style:{fontSize:13,marginRight:20,color:"#6b7280"},children:s}),Object(v.jsx)(I.a,{variant:"contained",style:{background:"#7c3aed",flex:1},onClick:function(){return navigator.clipboard.writeText(s),void c(!0)},children:Object(v.jsx)(p.a,{style:{fontSize:12},children:"Copy to clipboard"})}),Object(v.jsx)(we.a,{anchorOrigin:{horizontal:"right",vertical:"bottom"},open:i,autoHideDuration:1e3,onClose:l,children:Object(v.jsx)(z.a,{onClose:l,severity:"success",sx:{width:"100%"},children:"Script copied!"})})]})})},ke="fff",Se="7c3aed",ze="000",Ie=function(){var e=Object(h.g)(),t=Object(h.h)().domainId,n=Object(r.useState)({loading:!0,domainData:{}}),a=Object(o.a)(n,2),i=a[0],c=i.loading,s=i.domainData,d=a[1],u=Object(r.useState)({loadingEdit:!1,errorEdit:null}),j=Object(o.a)(u,2),b=j[0],m=b.loadingEdit,O=b.errorEdit,g=j[1],y=fe({bckColor:Object(xe.b)("#"+ke),primaryColor:Object(xe.b)("#"+Se),fontColor:Object(xe.b)("#"+ze)}),w=Object(o.a)(y,4),C=w[0],k=w[1],T=w[3],E=C.bckColor,W=C.primaryColor,P=C.fontColor,D=Object(r.useCallback)((function(){F(t).then((function(e){T((function(t){return Object(l.a)(Object(l.a)({},t),{},{bckColor:Object(xe.b)(e.data.bckColor),primaryColor:Object(xe.b)(e.data.primaryColor),fontColor:Object(xe.b)(e.data.fontColor)})})),d({domainData:e.data,loading:!1})})).catch((function(t){return e("/")}))}),[t,e,T]);Object(r.useEffect)((function(){D()}),[]);var A=function(){var n=Object(f.a)(x.a.mark((function n(){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,g({loadingEdit:!0,errorEdit:null}),n.next=4,L({domainId:t,domainData:{bckColor:"#".concat(E.hex||s.bckColor),primaryColor:"#".concat(W.hex||s.primaryColor),fontColor:"#".concat(P.hex||s.fontColor),domain:s.domain}});case 4:return n.sent,n.abrupt("return",e("/"));case 8:n.prev=8,n.t0=n.catch(0),g({loadingEdit:!1,errorEdit:n.t0.message});case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(v.jsxs)("div",{style:{margin:20},children:[Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(v.jsx)(H.a,{title:"Go back",children:Object(v.jsx)(U.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return e("/")},children:Object(v.jsx)(me.a,{})})}),Object(v.jsx)(p.a,{variant:"h6",component:"h4",style:{marginLeft:20},children:"Edit domain"})]}),c?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ye.a,{variant:"rectangular",width:300,height:57,style:{marginTop:20}}),Object(v.jsx)(ye.a,{variant:"rectangular",width:300,height:25,style:{marginTop:20}}),Object(v.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",width:300,justifyContent:"space-between",marginTop:20},children:[Object(v.jsx)(ye.a,{variant:"rectangular",width:90,height:60}),Object(v.jsx)(ye.a,{variant:"rectangular",width:90,height:60}),Object(v.jsx)(ye.a,{variant:"rectangular",width:90,height:60})]})]}):Object(v.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center"},children:[Object(v.jsxs)("div",{style:{marginTop:20,marginBottom:20,maxWidth:500},children:[Object(v.jsx)(p.a,{variant:"h6",component:"h6",style:{fontSize:36},children:s.domain}),Object(v.jsxs)("div",{children:[Object(v.jsx)(p.a,{style:{fontSize:19,color:"#6b7280",marginBottom:10},children:"Banner customization"}),Object(v.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(v.jsxs)("div",{style:{marginBottom:15},children:[Object(v.jsx)(p.a,{style:{fontSize:15},children:"Background color:"}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:10},children:[Object(v.jsx)(S.a,{variant:"outlined",size:"small",style:{maxWidth:100},disabled:!0,value:"#".concat(E.hex||ke)}),Object(v.jsx)(xe.a,{value:E,onChange:function(e){return k(e,"bckColor")},hideTextfield:!0})]})]}),Object(v.jsxs)("div",{style:{marginBottom:15},children:[Object(v.jsx)(p.a,{style:{fontSize:15},children:"Primary color:"}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:10},children:[Object(v.jsx)(S.a,{variant:"outlined",size:"small",style:{maxWidth:100},disabled:!0,value:"#".concat(W.hex||Se)}),Object(v.jsx)(xe.a,{value:W,onChange:function(e){return k(e,"primaryColor")},hideTextfield:!0})]})]}),Object(v.jsxs)("div",{style:{marginBottom:15},children:[Object(v.jsx)(p.a,{style:{fontSize:15},children:"Font color:"}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:10},children:[Object(v.jsx)(S.a,{variant:"outlined",size:"small",style:{maxWidth:100},disabled:!0,value:"#".concat(P.hex||ze)}),Object(v.jsx)(xe.a,{value:P,onChange:function(e){return k(e,"fontColor")},hideTextfield:!0})]})]})]})]}),O&&Object(v.jsx)(z.a,{severity:"error",style:{marginTop:10},children:O}),Object(v.jsx)(I.a,{variant:"contained",fullWidth:!0,style:{background:"#7c3aed",maxWidth:500,marginTop:20},onClick:function(){A()},children:m?Object(v.jsx)(B.a,{size:14,style:{color:"#fff"}}):Object(v.jsx)(p.a,{style:{fontSize:14},children:"Save changes"})})]}),Object(v.jsx)(Ce,{domainId:t})]})]})},Be=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(V,{}),Object(v.jsxs)(h.d,{children:[Object(v.jsx)(h.b,{path:"/new",element:Object(v.jsx)(ve,{})}),Object(v.jsx)(h.b,{path:"/domain/:domainId",element:Object(v.jsx)(Ie,{})}),Object(v.jsx)(h.b,{path:"/",element:Object(v.jsx)(be,{})})]})]})},Te=function(e){var t=e.children;return Object(r.useContext)(s).user.logged?Object(v.jsx)(h.a,{to:"/"}):t},Ee=function(e){var t=e.children,n=Object(r.useContext)(s).user,a=Object(h.f)(),i=a.pathname,c=a.search;return localStorage.setItem("lastPath",i+c),n.logged?t:Object(v.jsx)(h.a,{to:"/login"})},We=function(){return Object(v.jsx)(b.a,{children:Object(v.jsxs)(h.d,{children:[Object(v.jsx)(h.b,{path:"/login",element:Object(v.jsx)(Te,{children:Object(v.jsx)(Z,{})})}),Object(v.jsx)(h.b,{path:"/register",element:Object(v.jsx)(Te,{children:Object(v.jsx)(J,{})})}),Object(v.jsx)(h.b,{path:"/*",element:Object(v.jsx)(Ee,{children:Object(v.jsx)(Be,{})})})]})})},Pe=function(){return JSON.parse(localStorage.getItem("user"))||{logged:!1}},De=function(){var e=Object(r.useReducer)(j,{},Pe),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(v.jsx)(s.Provider,{value:{user:n,dispatch:a},children:Object(v.jsx)(We,{})})},Ae=(n(171),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,264)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))});c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(De,{})}),document.getElementById("root")),Ae()}},[[172,1,2]]]);
//# sourceMappingURL=main.95e7d5da.chunk.js.map